# Task Processor

## Описание

Это минималистичный сервис для асинхронной обработки задач с использованием буферизированной очереди.
Ограничение в задаче: решение должно быть полностью реализовано без сторонних зависимостей.

## Комментарии к решению
В условии задания не ясно где именно хранить task states: сделал в in memory хранилище(однако рано или поздно словится OOM т.к. стейты нельзя очищать: в условии не сказано по каким признакам делать инвалидацию)

Также не ясно что делать:
1. С payload(он есть в структуре таски но по условию хранить надо только ее стейт, про payload ничего не сказано) 
2. С сохраняемым state(меняю но если следовать условию задания то проверить его невозможно)

Мое решение: не знаю насколько мог отклоняться от условия поэтому для просмотра state сделал отдельную ручку, а с payload ничего не стал делать он не используется.

На данный момент добавил загрузку env vars через .env используя стороннюю библиотеку, если так принципально не использовать сторонние вообще: можете откатиться на прошлый коммит

## Start
### 1. Установите env vars
```env
ENV=local
HTTP_SERVER_HOST=localhost
HTTP_SERVER_PORT=8080
HTTP_SERVER_READ_HEADER_TIMEOUT=5s
HTTP_SERVER_WRITE_TIMEOUT=5s
HTTP_SERVER_READ_TIMEOUT=5s
WORKERS=1
QUEUE_SIZE=2
```

## Api docs

### 1. Healthcheck

- **GET /api/v1/health**
- Ответ: `200 OK`

---

### 2. Добавить задачу

- **POST /api/v1/enqueue**
- Тело запроса:
  ```json
  {
    "id": "string",
    "payload": "string",
    "max_retries": 3
  }
  ```

---

### 3. Посмотреть state задачи

- **GET /api/v1/tasks?task_id=**
- Тело ответа:
  ```json
  {
    "task_state":"done"
  }